(()=>{"use strict";const e=window.location.href;"github.com"===window.location.host&&chrome.storage.local.get("pipeBaekjoonhub",o=>{o&&o.pipe_baekjoonhub&&function(e){if(e.match(/\?error=(.+)/))chrome.tabs.getCurrent(e=>{chrome.tabs.remove(e.id,()=>{})});else{const o=e.match(/\?code=([\w\/\-]+)/);o&&async function(e){const o=new URLSearchParams;o.append("client_id","975f8d5cf6686dd1faed"),o.append("client_secret","934b2bfc3bb3ad239bc67bdfa81a378b1616dd1e"),o.append("code",e);try{const e=await fetch("https://github.com/login/oauth/access_token",{method:"POST",body:o,headers:{Accept:"application/json"}});e.ok?async function(e){try{const o=await fetch("https://api.github.com/user",{method:"GET",headers:{Authorization:`token ${e}`}});if(o.ok){const{login:s}=await o.json();chrome.runtime.sendMessage({closeWebPage:!0,isSuccess:!0,token:e,username:s,KEY:"BaekjoonHub_token"})}else console.error("Failed to fetch user data:",o.status,o.statusText),chrome.runtime.sendMessage({closeWebPage:!0,isSuccess:!1})}catch(e){console.error("Error during authentication:",e),chrome.runtime.sendMessage({closeWebPage:!0,isSuccess:!1})}}((await e.json()).access_token):(console.error("Failed to request token:",e.status,e.statusText),chrome.runtime.sendMessage({closeWebPage:!0,isSuccess:!1}))}catch(e){console.error("Error during token request:",e),chrome.runtime.sendMessage({closeWebPage:!0,isSuccess:!1})}}(o[1])}}(e)})})();